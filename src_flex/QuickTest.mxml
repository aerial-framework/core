<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" 
					   xmlns:mx="library://ns.adobe.com/flex/mx"
					   xmlns:services="org.aerial.services.*">
	
	<fx:Declarations>
		<services:UserService id="userService" result="result(event)" fault="fault(event)"/>
	</fx:Declarations>
	
	<s:Button label="Save!" click="save()"/>
	
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			import org.aerial.vo.ContactVO;
			import org.aerial.vo.GroupVO;
			import org.aerial.vo.PhonenumberVO;
			import org.aerial.vo.UserVO;
			
			private function save():void
			{
				var u:UserVO = new UserVO();
				u.username = "danny";
				u.password = "12345";
				
				var contact:ContactVO = new ContactVO();
				contact.name = "My Contact";
				
				u.Contact = contact;
				
				var p:PhonenumberVO = new PhonenumberVO();
				p.name = "Nadya";
				
				p.User = u;
				
				u.Phonenumbers = new ArrayCollection([p]);
				
				var g:GroupVO = new GroupVO();
				g.name = "my group 1";
				
				var g2:GroupVO = new GroupVO();
				g2.name = "my group 2";
				
				u.Groups = new ArrayCollection([g, g2]);
				
				userService.save(u).execute();
			}
			
			private function result(event:ResultEvent):void
			{
				
			}			
			
			private function fault(event:FaultEvent):void
			{
				
			}
		]]>
	</fx:Script>
</s:WindowedApplication>